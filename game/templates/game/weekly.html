{% extends "game/base.html" %} {% block content %}
<div>
  <style type="text/css">
    hr {
      position: relative;
      left: 50%;
      transform: translateX(-50%);
      width: 100vw; /* full viewport width */
      border: none;
      border-top: 2px solid black;
      margin: 24px 0 12px 0;
    }
    .bold {
      font-weight: bold;
    }
    .italic {
      font-style: italic;
    }
    .title {
      font-size: 30px;
      text-decoration: underline;
      margin: 12px auto;
    }
    .row {
      display: flex;
      flex-direction: row;
      width: 100%;
    }
    .subRow {
      display: flex;
      flex-direction: row;
      width: auto;
    }
    .inputRow {
      margin-right: 40px;
      display: flex;
      flex-direction: row;
    }
    .weatherRow {
      margin-bottom: 16px;
      width: 14.25%;
    }
    .column {
      display: flex;
      flex-direction: column;
    }
    .weatherBox {
      border: 1px solid black;
      align-items: left;
      padding: 0px 8px;
      margin: 4px 0;
    }
    .weatherItem {
      padding: 0px 4px;
      display: flex;
      flex-direction: row;
    }
    .redItem {
      color: red;
    }
    .blueItem {
      color: blue;
    }
    .bolded {
      font-weight: bold;
      margin-right: 10px;
    }
    .weeklySection {
      padding: 0px 3vw;
      align-items: center;
      justify-content: space-between;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: flex-start;
    }
    .date {
      font-size: 18px;
      margin: 0px 8px;
    }
    .irrigationLabel {
      margin-right: 4px;
    }
    .graphs {
      display: flex;
      overflow-x: auto;
      overflow-y: hidden;
      white-space: nowrap;
      max-width: 100%;
      box-sizing: border-box;
    }
    .graphContainer {
      display: flex;
      flex-direction: row;
      align-items: center;
    }
    .weatherHistory {
      border: 1px solid black;
      display: table;
      padding: 2px;
    }
    .divRow {
      display: flex;
      flex-direction: row;
      width: 100%;
    }
    .weatherContainer {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .infoContainer {
      display: flex;
      flex-direction: column;
      justify-content: space-evenly;
      max-width: 100%;
    }
    .inputButton {
      margin-left: auto;
      padding: 0 6px;
    }
    th,
    td {
      text-align: center;
    }
  </style>

  <div class="weeklySection">
    <h2 class="title">WEEK {{week}}</h2>
    <div class="divRow">
      <div class="column weatherRow">
        <h1 class="date">{{weather.0.day|linebreaksbr}}</h1>
        <div class="column weatherBox">
          <div class="column">
            <div class="weatherItem">
              <p class="redItem bolded">High:</p>
              <p class="redItem">{{weather.0.tHigh}}&deg;F</p>
            </div>
            <div class="weatherItem">
              <p class="blueItem bolded">Low:</p>
              <p class="blueItem">{{weather.0.tLow}}&deg;F</p>
            </div>
          </div>
          <p class="weatherItem italic">Rain: {{weather.0.pRain}} in.</p>
        </div>
      </div>

      <div class="column weatherRow">
        <h1 class="date">{{weather.1.day|linebreaksbr}}</h1>
        <div class="column weatherBox">
          <div class="column">
            <div class="weatherItem">
              <p class="redItem bolded">High:</p>
              <p class="redItem">{{weather.1.tHigh}}&deg;F</p>
            </div>
            <div class="weatherItem">
              <p class="blueItem bolded">Low:</p>
              <p class="blueItem">{{weather.1.tLow}}&deg;F</p>
            </div>
          </div>
          <p class="weatherItem italic">Rain: {{weather.1.pRain}} in.</p>
        </div>
      </div>

      <div class="column weatherRow">
        <h1 class="date">{{weather.2.day|linebreaksbr}}</h1>
        <div class="column weatherBox">
          <div class="column">
            <div class="weatherItem">
              <p class="redItem bolded">High:</p>
              <p class="redItem">{{weather.2.tHigh}}&deg;F</p>
            </div>
            <div class="weatherItem">
              <p class="blueItem bolded">Low:</p>
              <p class="blueItem">{{weather.2.tLow}}&deg;F</p>
            </div>
          </div>
          <p class="weatherItem italic">Rain: {{weather.2.pRain}} in.</p>
        </div>
      </div>

      <div class="column weatherRow">
        <h1 class="date">{{weather.3.day|linebreaksbr}}</h1>
        <div class="column weatherBox">
          <div class="column">
            <div class="weatherItem">
              <p class="redItem bolded">High:</p>
              <p class="redItem">{{weather.3.tHigh}}&deg;F</p>
            </div>
            <div class="weatherItem">
              <p class="blueItem bolded">Low:</p>
              <p class="blueItem">{{weather.3.tLow}}&deg;F</p>
            </div>
          </div>
          <p class="weatherItem italic">Rain: {{weather.3.pRain}} in.</p>
        </div>
      </div>

      <div class="column weatherRow">
        <h1 class="date">{{weather.4.day|linebreaksbr}}</h1>
        <div class="column weatherBox">
          <div class="column">
            <div class="weatherItem">
              <p class="redItem bolded">High:</p>
              <p class="redItem">{{weather.4.tHigh}}&deg;F</p>
            </div>
            <div class="weatherItem">
              <p class="blueItem bolded">Low:</p>
              <p class="blueItem">{{weather.4.tLow}}&deg;F</p>
            </div>
          </div>
          <p class="weatherItem italic">Rain: {{weather.4.pRain}} in.</p>
        </div>
      </div>

      <div class="column weatherRow">
        <h1 class="date">{{weather.5.day|linebreaksbr}}</h1>
        <div class="column weatherBox">
          <div class="column">
            <div class="weatherItem">
              <p class="redItem bolded">High:</p>
              <p class="redItem">{{weather.5.tHigh}}&deg;F</p>
            </div>
            <div class="weatherItem">
              <p class="blueItem bolded">Low:</p>
              <p class="blueItem">{{weather.5.tLow}}&deg;F</p>
            </div>
          </div>
          <p class="weatherItem italic">Rain: {{weather.5.pRain}} in.</p>
        </div>
      </div>

      <div class="column weatherRow">
        <h1 class="date">{{weather.6.day|linebreaksbr}}</h1>
        <div class="column weatherBox">
          <div class="column">
            <div class="weatherItem">
              <p class="redItem bolded">High:</p>
              <p class="redItem">{{weather.6.tHigh}}&deg;F</p>
            </div>
            <div class="weatherItem">
              <p class="blueItem bolded">Low:</p>
              <p class="blueItem">{{weather.6.tLow}}&deg;F</p>
            </div>
          </div>
          <p class="weatherItem italic">Rain: {{weather.6.pRain}} in.</p>
        </div>
      </div>
    </div>

    <div>Total Irrigation Costs: &Tab;&Tab;&Tab;&Tab;&Tab;&Tab;${{irr_cost}}</div>
    <div>Total Fertilizer Costs: ${{fert_cost}}</div>
    <div>Other Costs: ${{other_costs}}</div>
    <div class="bold">Total Cost: ${{total_cost}}</div>
    <div class="italic">(Cost per Bushel: ${{bushel_cost}})</div>

    <form action="" method="post" class="row">
      <div class="subRow">
        <div class="inputRow">
          <p class="irrigationLabel">Monday Irrigation:</p>
          <p class="irrigationField">{{iform.monday}} in.</p>
        </div>

        <div class="inputRow">
          <p class="irrigationLabel">Thursday Irrigation:</p>
          <p class="irrigationField">{{iform.thursday}} in.</p>
        </div>

        {% csrf_token %} {% if week == 1 or week == 6 or week == 9 or week == 10 or week == 12 or week == 14 or week == 15 %}
        <div class="inputRow">
          <p class="irrigationLabel">Week {{week}} Fertilizer:</p>
          <p class="irrigationField">{{fform.fertilizer}} lbs</p>
        </div>
        {% endif %}
      </div>

      <input type="submit" value="Continue" class="inputButton" />
    </form>
    {% if week > 1 %}
    <hr />
    <div class="infoContainer">
      <h2 class="title">Graphs</h2>
      <div class="graphContainer">
        <div class="graphs">
          <div>{{ aquaspy_graph | safe }}</div>
          <div>{{ water_layer_graph | safe }}</div>
          <div>{{ root_depth_graph | safe }}</div>
          <div>{{ growth_stage_graph | safe }}</div>
          <div>{{ nitrogen_stress_graph | safe }}</div>
        </div>
      </div>
      <div class="weatherContainer">
        <h2>Weather History</h2>
        <table class="weatherHistory">
          <tr>
            <th>Day</th>
            <th>High</th>
            <th>Low</th>
            <th>Rain</th>
            <th>&nbsp;&nbsp;&nbsp;</th>
            <th>Forecasted High</th>
            <th>Forecasted Low</th>
            <th>Forecasted Rain</th>
          </tr>
          {% for day in weather_history %}
          <tr>
            <td>{{ day.day }}</td>
            <td>{{ day.high }}</td>
            <td>{{ day.low }}</td>
            <td>{{ day.rain}}</td>
            <td></td>
            <td>{{ day.forecast_high }}</td>
            <td>{{ day.forecast_low }}</td>
            <td>{{ day.forecast_rain }}</td>
          </tr>
          {% endfor %}
        </table>
      </div>
    </div>
    {% endif %}
  </div>
  {% endblock %}
</div>
